<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Line Chart</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">

    <!-- Load Font Awesome 5 (free) icons -->
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
  </head>
  
   
    <!-- Page header -->
  <!-- https://bulma.io/documentation/layout/hero/ -->
  <section class="hero is-info is-bold">
    <div class="hero-body">
      <div class="container">
        <!-- TODO: Change title -->
        <h1 class="title">Air Traffic Visualizations for San Francisco Airport</h1>
        <!-- TODO: Change subtitle -->
        <h2 class="subtitle">Air Traffic Passenger Statistics Visualizations for 2005-2019</h2>
      </div>
    </div>
  </section>
  <!-- End page header -->

  <!-- Page navigation -->
  <!-- https://bulma.io/documentation/components/navbar/ -->
  <nav class="navbar is-light" role="navigation" aria-label="main navigation">
    <div class="container">
      <div class="navbar-brand">
        <!-- TODO: Change link to repository homepage if needed -->
        <!-- TODO: Change which navbar-item is-active if needed -->
        <a class="navbar-item is-active" href="index.html">
          <span class="icon"><i class="fas fa-home"></i></span>
          <span>Home</span>
        </a>

        <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="main-menu">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="main-menu" class="navbar-menu has-text-weight-medium">
        <!-- Left navbar items -->
        <div class="navbar-start">
          <a class="navbar-item" href="#data" title="Data">
            <span class="icon"><i class="fas fa-table"></i></span>
            <span>Data</span>
          </a>

          <!-- TODO: Modify or remove dropdown -->
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link">
              Visualizations
            </a>

            <div class="navbar-dropdown">
              <a href="line.html" class="navbar-item">
                <span class="icon"><i class="fas fa-chart-line"></i></span>
                <span>Line Chart</span>
              </a>
              <a href="area_chart.html" class="navbar-item">
                <span class="icon"><i class="fas fa-chart-area"></i></span>
                <span>Area Chart</span>
              </a>

              <hr class="navbar-divider">

              <a href="bar_chart.html" class="navbar-item">
                <span class="icon"><i class="fas fa-chart-bar"></i></span>
                <span>Bar Chart</span>
              </a>
              
            </div>
          </div>
        </div>

        <!-- Right navbar items -->
        <div class="navbar-end">
          <!-- TODO: Update as needed -->
          <a class="navbar-item" href="#grade" title="About">
            <span class="icon"><i class="fas fa-tasks"></i></span>
            <span>Grade</span>
          </a>

          <a class="navbar-item" href="#about" title="About">
            <span class="icon"><i class="fas fa-info-circle"></i></span>
            <span>About</span>
          </a>
        </div>
      </div>
    </div>
  </nav>
  <!-- End page navigation -->
  
  
</html>
<style>
svg {
    font-family: Sans-Serif, Arial;
}

.line {
  stroke-width: 2;
  fill: none;
}

.axis path {
  stroke: black;
}

.text {
  font-size: 12px;
}

.title-text {
  font-size: 12px;
}
</style>

<body>
<section class="section">
    <div class="container content">
      <h1>US Airlines Popularity Between Passengers</h1><br>
      
      <h6>D3 Implementation:</h6>
    <div id="chart"></div>

    <h3>Instruction</h3>

      <p>
        The plot shows trends related to the number of passengers using diffrent airlines starting from 2005 towards the end of 2019. The visualization has been encoded using different colors showing operating airline's names. The vertical axe shows number of passengers and horizontal line indicates the year when flights have been operated. It includes both domestic and International flights. You can also check the exact number of passengers and name of the airline interactively.
      </p>

     <h3>Data Wrangling</h3>

      <p>
        The original dataset has been used for this visualization with filter on airline names column. </p>
 
     <h3>Conclusion</h3>


        <p>In conclusion, United Airline's number of passengers has drastically increased over the period of 2012-2018. </p>


     <h6>Tableau Prototype:</h6>
      
      <figure class="media-left">
            <p class="image is-960x500"><img src="line.jpg"></p>
          </figure>

 <h2 id="about">About</h2>

        <!-- Profile box -->
        <!-- https://bulma.io/documentation/layout/media-object/ -->
        <article class="media">
          <!-- TODO: Replace with profile photo -->
          <figure class="media-left">
            <p class="image is-128x128" ><img class="is-rounded" src="profile.JPG"></p>
          </figure>

          <div class="media-content">
            <div class="content">
              <!-- TODO: Replace with contact information -->
              <p>
                <strong>Parisa Hemmati</strong><br/>
                CS Major, <a href="https://www.usfca.edu/">University of San Francisco</a><br/>
                <em>Expected Graduation: May 2022</em><br/>
                <i class="fas fa-envelope"></i> <a href="mailto:username@dons.usfca.edu">Phemmati@dons.usfca.edu</a>
              </p>

              <!-- TODO: Replace with brief biography -->
              <p>
                I am a Computer Science graduate student, I love coding and creating applications. My favorite courses are Java and data visualization. My hubbies are traveling, coding, and ofcourse playing piano.
              </p>

              <!-- TODO: Replace or remove tags -->
              <!-- https://bulma.io/documentation/elements/tag/ -->
              <div class="heading">Skills</div>

              <div class="tags">
                <span class="tag">Python</span>
                <span class="tag">C</span>
                <span class="tag">Java</span>
                <span class="tag">JavaScript</span>
                <span class="tag">HTML</span>
                <span class="tag">CSS</span>
                <span class="tag">Tableau</span>
                <span class="tag">Node.js</span>
              </div>
            </div>
          </div>
        </article>
        <!-- End profile box -->
      
    </div>
  </section>
  
  </body>

<script>

var data = [
  {
    name: "Alaska",
    values: [
      {date: "2005", Number: "642650"},
      {date: "2006", Number: "1300877"},
      {date: "2007", Number: "1504136"},
      {date: "2008", Number: "1353714"},
      {date: "2009", Number: "995076"},
      {date: "2010", Number: "912657"},
      {date: "2011", Number: "982644"},
      {date: "2012", Number: "987962"},
      {date: "2013", Number: "1137759"},
      {date: "2014", Number: "1319750"},
      {date: "2015", Number: "1473373"},
      {date: "2016", Number: "1513244"},
      {date: "2017", Number: "1631098"},
      {date: "2018", Number: "5014096"},
      {date: "2019", Number: "4458454"}
    ]
  },
  {
    name: "American",
    values: [
      {date: "2005", Number: "1719412"},
      {date: "2006", Number: "3302046"},
      {date: "2007", Number: "3446573"},
      {date: "2008", Number: "3337073"},
      {date: "2009", Number: "3237381"},
      {date: "2010", Number: "3222254"},
      {date: "2011", Number: "3083430"},
      {date: "2012", Number: "3086993"},
      {date: "2013", Number: "2983840"},
      {date: "2014", Number: "2924657"},
      {date: "2015", Number: "3238472"},
      {date: "2016", Number: "4396696"},
      {date: "2017", Number: "3763394"},
      {date: "2018", Number: "3899614"},
      {date: "2019", Number: "2974203"}
    ]
  },
  {
    name: "Delta",
    values: [
      {date: "2005", Number: "1036036"},
      {date: "2006", Number: "1694670"},
      {date: "2007", Number: "1699216"},
      {date: "2008", Number: "1560673"},
      {date: "2009", Number: "1585205"},
      {date: "2010", Number: "2986281"},
      {date: "2011", Number: "2911954"},
      {date: "2012", Number: "2942471"},
      {date: "2013", Number: "2905729"},
      {date: "2014", Number: "2983327"},
      {date: "2015", Number: "3362217"},
      {date: "2016", Number: "3749816"},
      {date: "2017", Number: "3602617"},
      {date: "2018", Number: "4114808"},
      {date: "2019", Number: "3352882"}
    ]
  },

  {
    name: "Frontier",
    values: [
      {date: "2005", Number: "175293"},
      {date: "2006", Number: "431631"},
      {date: "2007", Number: "525366"},
      {date: "2008", Number: "364592"},
      {date: "2009", Number: "320604"},
      {date: "2010", Number: "378570"},
      {date: "2011", Number: "453879"},
      {date: "2012", Number: "433890"},
      {date: "2013", Number: "377488"},
      {date: "2014", Number: "421428"},
      {date: "2015", Number: "583777"},
      {date: "2016", Number: "732493"},
      {date: "2017", Number: "562935"},
      {date: "2018", Number: "328721"},
      {date: "2019", Number: "343477"}
    ]
  },

  {
    name: "JetBlue",
    values: [
      {date: "2005", Number: "0"},
      {date: "2006", Number: "0"},
      {date: "2007", Number: "316208"},
      {date: "2008", Number: "427014"},
      {date: "2009", Number: "451540"},
      {date: "2010", Number: "814132"},
      {date: "2011", Number: "850308"},
      {date: "2012", Number: "1040335"},
      {date: "2013", Number: "1085413"},
      {date: "2014", Number: "1047908"},
      {date: "2015", Number: "1425228"},
      {date: "2016", Number: "1545120"},
      {date: "2017", Number: "1582654"},
      {date: "2018", Number: "1570148"},
      {date: "2019", Number: "1079793"}
    ]
  },

  {
    name: "SouthWest",
    values: [
      {date: "2005", Number: "0"},
      {date: "2006", Number: "0"},
      {date: "2007", Number: "500926"},
      {date: "2008", Number: "2117364"},
      {date: "2009", Number: "2847732"},
      {date: "2010", Number: "2952175"},
      {date: "2011", Number: "2977799"},
      {date: "2012", Number: "3028246"},
      {date: "2013", Number: "3144575"},
      {date: "2014", Number: "3268483"},
      {date: "2015", Number: "3469646"},
      {date: "2016", Number: "3547984"},
      {date: "2017", Number: "3704789"},
      {date: "2018", Number: "3730470"},
      {date: "2019", Number: "2432885"}
    ]
  },

  {
    name: "United",
    values: [
      {date: "2005", Number: "642315"},
      {date: "2006", Number: "1259048"},
      {date: "2007", Number: "1337727"},
      {date: "2008", Number: "1342133"},
      {date: "2009", Number: "1428919"},
      {date: "2010", Number: "1493794"},
      {date: "2011", Number: "1742295"},
      {date: "2012", Number: "3531293"},
      {date: "2013", Number: "11820404"},
      {date: "2014", Number: "18055781"},
      {date: "2015", Number: "18203168"},
      {date: "2016", Number: "19430014"},
      {date: "2017", Number: "21707841"},
      {date: "2018", Number: "22428953"},
      {date: "2019", Number: "17068034"}
    ]
  },

];



var width = 960;
var height = 500;
var margin = 150;
var duration = 250;

var lineOpacity = "0.25";
var lineOpacityHover = "0.85";
var otherLinesOpacityHover = "0.1";
var lineStroke = "1.5px";
var lineStrokeHover = "2.5px";

var circleOpacity = '0.85';
var circleOpacityOnLineHover = "0.25"
var circleRadius = 3;
var circleRadiusHover = 6;


/* Format Data */
var parseDate = d3.timeParse("%Y");
data.forEach(function(d) { 
  d.values.forEach(function(d) {
    d.date = parseDate(d.date);
    d.Number = +d.Number;    
  });
});


/* Scale */
var xScale = d3.scaleTime()
  .domain(d3.extent(data[0].values, d => d.date))
  .range([0, width-margin]);

  console.log(data[0].values);

var yScale = d3.scaleLinear()
  .domain([0, 30000000])
  .range([height-margin, 0]);

var color = d3.scaleOrdinal(d3.schemeCategory10);
  

/* Add SVG */
var svg = d3.select("#chart").append("svg")
  .attr("width", width)
  .attr("height", height)
  .append('g')
  .attr("transform", `translate(${margin-50}, ${margin-50})`);

// Handmade legend
svg.append("circle").attr("cx",50).attr("cy",-50).attr("r", 3).style("fill", "#1f77b4")
svg.append("circle").attr("cx",150).attr("cy",-50).attr("r", 3).style("fill", "#ff7f0e")
svg.append("circle").attr("cx",250).attr("cy",-50).attr("r", 3).style("fill", "#2ca02c")
svg.append("circle").attr("cx",350).attr("cy",-50).attr("r", 3).style("fill", "#d62728")
svg.append("circle").attr("cx",450).attr("cy",-50).attr("r", 3).style("fill", "#9467BD")
svg.append("circle").attr("cx",550).attr("cy",-50).attr("r", 3).style("fill", "#8c564b")
svg.append("circle").attr("cx",650).attr("cy",-50).attr("r", 3).style("fill", "#e377c2")
svg.append("text").attr("x", 10).attr("y", -50).text("Alaska").style("font-size", "10px").attr("alignment-baseline","middle")
svg.append("text").attr("x", 98).attr("y", -50).text("American").style("font-size", "10px").attr("alignment-baseline","middle")
svg.append("text").attr("x", 217).attr("y", -50).text("Delta").style("font-size", "10px").attr("alignment-baseline","middle")
svg.append("text").attr("x", 306).attr("y", -50).text("Frontier").style("font-size", "10px").attr("alignment-baseline","middle")
svg.append("text").attr("x", 407).attr("y", -50).text("JetBlue").style("font-size", "10px").attr("alignment-baseline","middle")
svg.append("text").attr("x", 492).attr("y", -50).text("SouthWest").style("font-size", "10px").attr("alignment-baseline","middle")
svg.append("text").attr("x", 612).attr("y", -50).text("United").style("font-size", "10px").attr("alignment-baseline","middle")

/* Add line into SVG */
var line = d3.line()
  .x(d => xScale(d.date))
  .y(d => yScale(d.Number));

let lines = svg.append('g')
  .attr('class', 'lines');

lines.selectAll('.line-group')
  .data(data).enter()
  .append('g')
  .attr('class', 'line-group')  
  .on("mouseover", function(d, i) {
      svg.append("text")
        .attr("class", "title-text")
        .style("fill", color(i))        
        .text(d.name)
        .attr("text-anchor", "middle")
        .attr("x", (width-margin)/2)
        .attr("y", 5);
    })
  .on("mouseout", function(d) {
      svg.select(".title-text").remove();
    })
  .append('path')
  .attr('class', 'line')  
  .attr('d', d => line(d.values))
  .style('stroke', (d, i) => color(i))
  .style('opacity', lineOpacity)
  .on("mouseover", function(d) {
      d3.selectAll('.line')
          .style('opacity', otherLinesOpacityHover);
      d3.selectAll('.circle')
          .style('opacity', circleOpacityOnLineHover);
      d3.select(this)
        .style('opacity', lineOpacityHover)
        .style("stroke-width", lineStrokeHover)
        .style("cursor", "pointer");
    })
  .on("mouseout", function(d) {
      d3.selectAll(".line")
          .style('opacity', lineOpacity);
      d3.selectAll('.circle')
          .style('opacity', circleOpacity);
      d3.select(this)
        .style("stroke-width", lineStroke)
        .style("cursor", "none");
    });


/* Add circles in the line */
lines.selectAll("circle-group")
  .data(data).enter()
  .append("g")
  .style("fill", (d, i) => color(i))
  .selectAll("circle")
  .data(d => d.values).enter()
  .append("g")
  .attr("class", "circle")  
  .on("mouseover", function(d) {
      d3.select(this)     
        .style("cursor", "pointer")
        .append("text")
        .attr("class", "text")
        .text(`${d.Number}`)
        .attr("x", d => xScale(d.date) + 5)
        .attr("y", d => yScale(d.Number) - 10);
    })
  .on("mouseout", function(d) {
      d3.select(this)
        .style("cursor", "none")  
        .transition()
        .duration(duration)
        .selectAll(".text").remove();
    })
  .append("circle")
  .attr("cx", d => xScale(d.date))
  .attr("cy", d => yScale(d.Number))
  .attr("r", circleRadius)
  .style('opacity', circleOpacity)
  .on("mouseover", function(d) {
        d3.select(this)
          .transition()
          .duration(duration)
          .attr("r", circleRadiusHover);
      })
    .on("mouseout", function(d) {
        d3.select(this) 
          .transition()
          .duration(duration)
          .attr("r", circleRadius);  
      });


/* Add Axis into SVG */
var xAxis = d3.axisBottom(xScale).ticks(5);
var yAxis = d3.axisLeft(yScale).ticks(5);

svg.append("g")
  .attr("class", "x axis")
  .attr("transform", `translate(0, ${height-margin})`)
  .call(xAxis)
  .append('text')
  .attr("x", 350)
  .attr("y", 35)
  .attr("fill", "#000")
  .text("Years of Activity");

svg.append("g")
  .attr("class", "y axis")
  .call(yAxis)
  .append('text')
  .attr("y", 15)
  .attr("transform", "rotate(-90)")
  .attr("fill", "#000")
  .text("Number of Passengers");

</script>




<!-- Page footer -->
  <!-- https://bulma.io/documentation/layout/footer/ -->
  <footer class="footer">
    <div class="content has-text-centered is-size-7">
      <p>
        <a href="#top">
          <span class="fas fa-arrow-up"></span>
          <span class="has-text-weight-medium">Back to Top</span>
        </a>
      </p>

      <p>
        <!-- TODO: Change to link to your Github repository -->
        <a href="https://github.com/usf-cs360-spring2020/template-bulma" class="button is-small" style="padding-left: 1em; padding-right: 1em;">
          <i class="fab fa-github-alt"></i>&nbsp;<strong>Github</strong>
        </a>

        <a href="https://fontawesome.com/" class="button is-small" style="padding-left: 1em; padding-right: 1em;">
          <i class="fab fa-font-awesome"></i>&nbsp;<strong>FontAwesome</strong>
        </a>

        <a href="https://bulma.io" class="button is-small">
          <img src="https://bulma.io/images/made-with-bulma--semiblack.png" alt="Made with Bulma" width="128" height="24">
        </a>
      </p>
    </div>
  </footer>
  <!-- End page footer -->

  <!-- Mobile menu responsiveness -->
  <!-- https://bulma.io/documentation/components/navbar/ -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

    if ($navbarBurgers.length > 0) {
      $navbarBurgers.forEach( el => {
        el.addEventListener('click', () => {
          const target = el.dataset.target;
          const $target = document.getElementById(target);
          el.classList.toggle('is-active');
          $target.classList.toggle('is-active');
        });
      });
    }
  });
  </script>
  <!-- End mobile menu responsiveness -->

